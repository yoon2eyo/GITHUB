@startuml
' FaceModelServiceComponent.puml

package "Interface Layer" {
  ' API 인터페이스
  interface IFaceModelApi
  interface IModelTrainingApi

  ' API 구현 컴포넌트
  component FaceModelApiImpl
  component ModelTrainingApiImpl
  
  IFaceModelApi -- FaceModelApiImpl
  IModelTrainingApi -- ModelTrainingApiImpl
}

package "Business Layer" {
  ' 상위 레이어로 연결되는 인터페이스
  interface IFaceModelManagerService
  interface IModelTrainingService
  interface IModelValidationService
  interface IModelStorageService

  ' 비즈니스 컴포넌트
  component FaceModelManager
  component ModelTrainer
  component ModelValidator
  component ModelDistributor
  
  ' 서비스 구현
  IFaceModelManagerService -- FaceModelManager
  IModelTrainingService -- ModelTrainer
  IModelValidationService -- ModelValidator
  IModelStorageService -- ModelDistributor

  ' 내부 연결
  FaceModelManager .( IModelTrainingService
  FaceModelManager .( IModelValidationService
  FaceModelManager .( IModelStorageService
  ModelTrainer .( IModelValidationService
  
  ' 하위 레이어로 연결되는 인터페이스
  interface IModelUpdateEventHandler
  interface IModelDistributionHandler
  
  IModelUpdateEventHandler -- ModelDistributor
  IModelDistributionHandler -- ModelDistributor
}

package "System Interface Layer" {
  ' 시스템 인터페이스
  interface IModelRepository
  interface ITrainingDataRepository
  interface IMessagePublisherService
  interface IMessageSubscriptionService
  interface IMLOpsService
  
  ' 시스템 컴포넌트
  component ModelRepositoryImpl
  component TrainingDataRepositoryImpl
  component MessageBrokerComponent
  component MLOpsServiceAdapter
  
  ' 저장소
  database ModelDatabase
  database TrainingDataStore
  
  ' 시스템 구현
  IModelRepository -- ModelRepositoryImpl
  ITrainingDataRepository -- TrainingDataRepositoryImpl
  IMessagePublisherService -- MessageBrokerComponent
  IMessageSubscriptionService -- MessageBrokerComponent
  IMLOpsService -- MLOpsServiceAdapter
  
  ModelRepositoryImpl ..( ModelDatabase
  TrainingDataRepositoryImpl ..( TrainingDataStore
}

' 패키지 외부 연결
' Interface Layer -> Business Layer
FaceModelApiImpl ..( IFaceModelManagerService
ModelTrainingApiImpl ..( IModelTrainingService

' Business Layer -> System Interface Layer
ModelDistributor ..( IModelRepository : <<persist>>
ModelTrainer ..( ITrainingDataRepository : <<persist>>
ModelTrainer ..( IMLOpsService : <<use>>

' Message Broker 연결
FaceModelManager ..( IMessagePublisherService : <<publish>>
ModelTrainer ..( IMessagePublisherService : <<publish>>
ModelValidator ..( IMessagePublisherService : <<publish>>
ModelDistributor ..( IMessageSubscriptionService : <<subscribe>>

' Event Handler 연결
MessageBrokerComponent ..( IModelUpdateEventHandler : <<IDomainEvent>>
MessageBrokerComponent ..( IModelDistributionHandler : <<IDomainEvent>>

@enduml