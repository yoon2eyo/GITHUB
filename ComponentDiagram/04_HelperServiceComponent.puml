@startuml HelperServiceComponent
' HelperService_component.puml (가이드 준수)

package "Interface Layer" {
  interface IHelperServiceApi
  component HelperTaskManagementApi
  IHelperServiceApi -- HelperTaskManagementApi
}

package "Business Layer" {
  interface ITaskManagementService
  interface IRewardConfirmationService
  interface IHelperEventConsumer
  
  component TaskManagementManager
  component RewardConfirmationManager
  component AIPanDokuConsumer
  component RewardUpdateConsumer
  component HelperEventConsumerAdapter
  
  ' Service implementations
  ITaskManagementService -- TaskManagementManager
  IRewardConfirmationService -- RewardConfirmationManager
  
  ' Event Consumer implementations
  IHelperEventConsumer -- AIPanDokuConsumer
  IHelperEventConsumer -- RewardUpdateConsumer
  
  ' Event Consumer Adapter
  HelperEventConsumerAdapter ..( IHelperEventConsumer : <<use>>
}

package "System Interface Layer" {
  interface IHelperRepository
  interface IAIPanDokuServiceApi
  interface IMessagePublisherService
  interface IMessageSubscriptionService
  
  component HelperRepositoryImpl
  component AIPanDokuServiceClient
  component MessageBrokerComponent
  database HelperDatabase
  
  IHelperRepository -- HelperRepositoryImpl
  IAIPanDokuServiceApi -- AIPanDokuServiceClient
  IMessagePublisherService -- MessageBrokerComponent
  IMessageSubscriptionService -- MessageBrokerComponent
  HelperRepositoryImpl ..( HelperDatabase
}

' 패키지 외부 연결
' Interface Layer -> Business Layer
HelperTaskManagementApi ..( ITaskManagementService : <<use>>
HelperTaskManagementApi ..( IRewardConfirmationService : <<use>>

' Business Layer -> Message Broker 연결
TaskManagementManager ..( IMessagePublisherService : <<publish>>
RewardConfirmationManager ..( IMessagePublisherService : <<publish>>
HelperEventConsumerAdapter ..( IMessageSubscriptionService : <<subscribe>>

' Business Layer -> System Interface Layer
TaskManagementManager ..( IHelperRepository : <<persist>>
TaskManagementManager ..( IAIPanDokuServiceApi : <<HTTP>>
RewardConfirmationManager ..( IHelperRepository : <<persist>>
AIPanDokuConsumer ..( IHelperRepository : <<persist>>
AIPanDokuConsumer ..( IAIPanDokuServiceApi : <<HTTP>>
RewardUpdateConsumer ..( IHelperRepository : <<persist>>

@enduml
