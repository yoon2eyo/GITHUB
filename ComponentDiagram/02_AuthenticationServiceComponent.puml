@startuml AuthenticationServiceComponent
' AuthService_component.puml (가이드 준수)

package "Interface Layer" {
  interface IAuthServiceApi
  interface IAuthManagementApi
  
  component AuthServiceApiImpl
  component AuthManagementApiImpl
  
  ' API implementations
  IAuthServiceApi -- AuthServiceApiImpl
  IAuthManagementApi -- AuthManagementApiImpl
}

package "Business Layer" {
  interface IAuthenticationService
  interface IAuthorizationService
  interface IUserRegistrationService
  interface IAuthEventConsumer
  
  component AuthenticationManager
  component AuthorizationManager
  component UserRegistrationManager
  component AuthEventConsumer
  
  ' Service implementations
  IAuthenticationService -- AuthenticationManager
  IAuthorizationService -- AuthorizationManager
  IUserRegistrationService -- UserRegistrationManager
  IAuthEventConsumer -- AuthEventConsumer
  
  ' Business layer internal relationships
  AuthenticationManager ..( IAuthorizationService : <<Local>>
  UserRegistrationManager ..( IAuthenticationService : <<Local>>
}

package "System Interface Layer" {
  interface IAuthRepository
  interface IMessagePublisherService
  interface IMessageSubscriptionService
  interface ITokenService
  interface ICreditCardVerificationService
  
  component AuthRepositoryImpl
  component MessageBrokerComponent
  component JwtTokenServiceImpl
  component CreditCardVerificationClient
  database AuthDatabase
  
  ' System interface implementations
  IAuthRepository -- AuthRepositoryImpl
  IMessagePublisherService -- MessageBrokerComponent
  IMessageSubscriptionService -- MessageBrokerComponent
  ITokenService -- JwtTokenServiceImpl
  ICreditCardVerificationService -- CreditCardVerificationClient
  
  ' System dependencies
  AuthRepositoryImpl ..( AuthDatabase : <<JDBC>>
  MessageBrokerComponent ..( IAuthEventConsumer : <<RabbitMQ>>
}

' 패키지 외부 연결
' Interface Layer -> Business Layer
AuthServiceApiImpl ..( IAuthenticationService : <<HTTP>>
AuthServiceApiImpl ..( IAuthorizationService : <<HTTP>>
AuthManagementApiImpl ..( IUserRegistrationService : <<HTTP>>

' Business Layer -> Message Broker 연결
AuthenticationManager ..( IMessagePublisherService : <<RabbitMQ>>
AuthorizationManager ..( IMessagePublisherService : <<RabbitMQ>>
UserRegistrationManager ..( IMessagePublisherService : <<RabbitMQ>>
AuthEventConsumer ..( IMessageSubscriptionService : <<RabbitMQ>>

' Business Layer -> System Interface Layer
AuthenticationManager ..( IAuthRepository : <<JDBC>>
AuthenticationManager ..( ITokenService : <<Local>>
AuthenticationManager ..( ICreditCardVerificationService : <<HTTP>>
AuthorizationManager ..( IAuthRepository : <<JDBC>>
UserRegistrationManager ..( IAuthRepository : <<JDBC>>
AuthEventConsumer ..( IAuthRepository : <<persist>>

legend right
  Auth Service structure
  - Authentication and authorization services
  - User registration and management
  - Token-based security with JWT
  - Event-driven updates for auth state changes
end legend

@enduml
