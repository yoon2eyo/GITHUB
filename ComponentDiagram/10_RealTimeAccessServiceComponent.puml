@startuml RealTimeAccessServiceComponent
' RealTimeAccessService_component.puml (DD-05: Performance Optimization)

package "Interface Layer" {
  interface IAccessControlApi
  interface IFaceVerificationApi
  
  component AccessControlApiImpl
  component FaceVerificationApiImpl
  
  IAccessControlApi -- AccessControlApiImpl
  IFaceVerificationApi -- FaceVerificationApiImpl
}

package "Business Layer" {
  interface IAccessVectorRepository
  interface IFaceModelService
  interface IAccessServiceApi
  interface IMessagePublisherService
  
  component AccessAuthorizationManager
  component GateController
  component FaceVectorCache
  
  interface IFaceModelManagement
  interface IVectorComparison
  component ModelLifecycleManager
  component VectorComparisonEngine
  
  component AccessEventProcessor
  
  ' Access Service connections
  IAccessServiceApi -- AccessAuthorizationManager
  AccessAuthorizationManager ..( FaceVectorCache : <<warmUp>>
  FaceVectorCache ..( IAccessVectorRepository : <<getOrLoad>>
  AccessAuthorizationManager ..( GateController : <<controlGate>>
  
  ' Face Model connections (IPC - Same Physical Node)
  IFaceModelService -- VectorComparisonEngine
  IFaceModelManagement -- ModelLifecycleManager
  AccessAuthorizationManager ..( IFaceModelService : <<calculateSimilarityScore>>
  
  ' Pipeline Optimization (Parallel Processing)
  note on link AccessAuthorizationManager to IFaceModelService
    DD-05 Pipeline Optimization:
    - Feature Extraction (parallel)
    - Vector Matching (parallel)
    - Combined latency: ~205ms
  end note
  
  ' Hot Swap Support
  ModelLifecycleManager ..( VectorComparisonEngine : <<IPC>>
  note on link ModelLifecycleManager to VectorComparisonEngine
    Hot Swap: 
    - activeModel (AtomicReference)
    - modelHistory (Rollback support)
    - Transition time: <1ms
  end note
  
  ' Event handling
  AccessEventProcessor ..( IMessagePublisherService : <<RabbitMQ>>
}

package "System Interface Layer" {
  interface IAccessRepository
  interface IMessagePublisherService
  interface IMessageSubscriptionService
  
  component AccessRepositoryImpl
  component MessageBrokerComponent
  database AccessDatabase
  database VectorDatabase
  
  IAccessRepository -- AccessRepositoryImpl
  IMessagePublisherService -- MessageBrokerComponent
  IMessageSubscriptionService -- MessageBrokerComponent
  
  AccessRepositoryImpl ..( AccessDatabase : <<JDBC>>
  AccessRepositoryImpl ..( VectorDatabase : <<JDBC>>
}

' External connections
AccessControlApiImpl ..( IAccessServiceApi : <<HTTP>>
FaceVerificationApiImpl ..( IFaceModelService : <<IPC>>

' Business to System Interface
AccessAuthorizationManager ..( IAccessRepository : <<JDBC>>
AccessAuthorizationManager ..( IMessagePublisherService : <<RabbitMQ>>
AccessEventProcessor ..( IMessageSubscriptionService : <<RabbitMQ>>

note top of AccessAuthorizationManager
  **DD-05 Data Pre-Fetching**
  FaceVectorCache:
  - Warm-up: Pre-load hot face IDs
  - Cache hit rate: >90%
  - Removes DB I/O latency
  - Memory-optimized: LRU eviction
end note

@enduml
