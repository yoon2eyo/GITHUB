@startuml BranchContentServiceComponent
' BranchContentService_component.puml (DD-06: Hot/Cold Path 통합)

package "Interface Layer" {
  interface IBranchContentServiceApi
  component BranchContentServiceApiImpl
  IBranchContentServiceApi -- BranchContentServiceApiImpl
}

package "Business Layer" {
  interface IQueryKeywordTokenizer
  interface ISearchEngine
  interface IBranchPreferenceIndex
  interface IBranchContentService
  interface ILlmKeywordExtractionManager
  interface IContentAnalysisService
  interface IPreferenceMatchService
  interface IPreferenceMatchScheduler
  interface IPreferenceEventConsumer
  
  component QueryKeywordTokenizer
  component SimpleSearchEngine
  component BranchPreferenceIndex
  component BranchContentService
  component LlmKeywordExtractionManager
  component ContentAnalysisManager
  component PreferenceMatchManager
  component PreferenceMatchScheduler
  component PreferenceMatchConsumer
  component BranchRecommendation
  
  ' Interface - Component connections
  IQueryKeywordTokenizer -- QueryKeywordTokenizer
  ISearchEngine -- SimpleSearchEngine
  IBranchPreferenceIndex -- BranchPreferenceIndex
  IBranchContentService -- BranchContentService
  ILlmKeywordExtractionManager -- LlmKeywordExtractionManager
  IContentAnalysisService -- ContentAnalysisManager
  IPreferenceMatchService -- PreferenceMatchManager
  IPreferenceMatchScheduler -- PreferenceMatchScheduler
  IPreferenceEventConsumer -- PreferenceMatchConsumer
  
  ' Hot Path: Search operations (BranchContentService -> SearchEngine)
  BranchContentService ..( IQueryKeywordTokenizer : <<Local>>
  QueryKeywordTokenizer ..( IBranchPreferenceIndex : <<Local>>
  BranchPreferenceIndex ..( ISearchEngine : <<Local>>
  SimpleSearchEngine --> BranchRecommendation : <<Local>>
  
  ' Cold Path: Content registration (BranchContentService -> LLM)
  BranchContentService ..( ILlmKeywordExtractionManager : <<HTTP>>
  LlmKeywordExtractionManager ..( IContentAnalysisService : <<Local>>
  ContentAnalysisManager ..( IPreferenceMatchService : <<Local>>
  PreferenceMatchManager ..( IPreferenceMatchScheduler : <<Local>>
  PreferenceMatchScheduler ..( IPreferenceEventConsumer : <<Local>>
}

package "System Interface Layer" {
  interface IMessagePublisherService
  interface IMessageSubscriptionService
  interface ISearchRepository
  
  component MessageBrokerComponent
  component SearchRepositoryImpl
  database SearchDatabase
  
  IMessagePublisherService -- MessageBrokerComponent
  IMessageSubscriptionService -- MessageBrokerComponent
  ISearchRepository -- SearchRepositoryImpl
  SearchRepositoryImpl ..( SearchDatabase : <<JDBC>>
}

' External connections
BranchContentServiceApiImpl ..( IBranchContentService : <<HTTP>>

' Hot Path external connections
BranchPreferenceIndex ..( ISearchRepository : <<JDBC>>

' Cold Path external connections
PreferenceMatchManager ..( IMessagePublisherService : <<RabbitMQ>>
PreferenceMatchConsumer ..( IMessageSubscriptionService : <<RabbitMQ>>
PreferenceMatchConsumer ..( ISearchRepository : <<JDBC>>

@enduml
