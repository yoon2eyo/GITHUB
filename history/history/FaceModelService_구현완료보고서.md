# Face Model Service êµ¬í˜„ ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2025ë…„  
**ìƒíƒœ**: âœ… Phase 1 ì™„ë£Œ (Port Interface + í•µì‹¬ êµ¬í˜„)  
**ëŒ€ìƒ**: Face Model Service ë…ë¦½ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬í˜„

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [êµ¬í˜„ í˜„í™©](#êµ¬í˜„-í˜„í™©)
3. [ìƒì„±ëœ íŒŒì¼ ëª©ë¡](#ìƒì„±ëœ-íŒŒì¼-ëª©ë¡)
4. [ì•„í‚¤í…ì²˜ êµ¬ì¡°](#ì•„í‚¤í…ì²˜-êµ¬ì¡°)
5. [ë‹¤ìŒ ë‹¨ê³„](#ë‹¤ìŒ-ë‹¨ê³„)

---

## ê°œìš”

### ëª©í‘œ
RealTime_AccessService ë‚´ë¶€ ëª¨ë“ˆë¡œ êµ¬í˜„ëœ Face Model ê¸°ëŠ¥ì„ **ë…ë¦½ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤**ë¡œ ì¶”ì¶œ  
- ì•„í‚¤í…ì²˜ ìˆœê²°ì„± í™•ë³´
- ì¬ì‚¬ìš©ì„± ì¦ëŒ€
- í™•ì¥ì„± ê°œì„ 

### ì˜ì‚¬ê²°ì • ë°°ê²½
- **ë¬¸ì œ**: ë‹¤ì´ì–´ê·¸ë¨ì—ëŠ” ë…ë¦½ ì„œë¹„ìŠ¤, ì½”ë“œëŠ” RealTime_AccessService ë‚´ ëª¨ë“ˆ
- **ë¶„ì„**: FaceModel_êµ¬ì¡°_ì˜ì‚¬ê²°ì •_ê°€ì´ë“œ.md (8,000+ ë‹¨ì–´)
- **ì„ íƒ**: **Option A (ë…ë¦½ ì„œë¹„ìŠ¤)** ì„ ì • ë° êµ¬í˜„ ì§„í–‰

---

## êµ¬í˜„ í˜„í™©

### Phase 1: Port Interfaces ë° í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ âœ…

**íŒŒì¼ ìƒì„± ìˆ˜**: 9ê°œ

| ê³„ì¸µ | íŒŒì¼ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|------|
| **Ports** | IFaceModelServiceApi.java | âœ… | ì™¸ë¶€ API (4 ë©”ì„œë“œ) |
| | IFaceModelService.java | âœ… | ë²¡í„° ìœ ì‚¬ë„ ê³„ì‚° (3 ë©”ì„œë“œ) |
| | IModelManagementPort.java | âœ… | ëª¨ë¸ ë¼ì´í”„ì‚¬ì´í´ (4 ë©”ì„œë“œ) |
| | IFaceModelEventHandler.java | âœ… | ì´ë²¤íŠ¸ í•¸ë“¤ë§ (3 ë©”ì„œë“œ) |
| | IFaceModelRepository.java | âœ… | ë²¡í„° ì €ì¥ì†Œ (5 ë©”ì„œë“œ) |
| | IModelVersionRepository.java | âœ… | ëª¨ë¸ ë²„ì „ ê´€ë¦¬ (6 ë©”ì„œë“œ) |
| **Models** | FaceModelData.java | âœ… | ì €ì¥ëœ ì–¼êµ´ ë²¡í„° ë°ì´í„° |
| | ModelVersion.java | âœ… | ëª¨ë¸ ë²„ì „ ì •ë³´ |
| | FaceVerificationResult.java | âœ… | ì¸ì¦ ê²°ê³¼ ë°˜í™˜ ëª¨ë¸ |
| **Internal Logic** | VectorComparisonEngine.java | âœ… | ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚° ì—”ì§„ |
| | ModelLifecycleManager.java | âœ… | ëª¨ë¸ ë²„ì „ ê´€ë¦¬ ë° ë¡¤ë°± |
| | FaceModelEventProcessor.java | âœ… | ë„ë©”ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬ |
| **Adapter** | FaceModelServiceApiImpl.java | âœ… | ì™¸ë¶€ API êµ¬í˜„ |
| **System** | FaceModelServiceComponent.java | âœ… | êµ¬ì„± ë£¨íŠ¸ (DI ì»¨í…Œì´ë„ˆ) |

---

## ìƒì„±ëœ íŒŒì¼ ëª©ë¡

### í´ë” êµ¬ì¡°
```
SRC/
  FaceModelService/
    src/
      main/
        java/
          com/
            smartfitness/
              facemodel/
                ports/                    # 6ê°œ ì¸í„°í˜ì´ìŠ¤
                  IFaceModelServiceApi.java
                  IFaceModelService.java
                  IModelManagementPort.java
                  IFaceModelEventHandler.java
                  IFaceModelRepository.java
                  IModelVersionRepository.java
                model/                    # 3ê°œ ë„ë©”ì¸ ëª¨ë¸
                  FaceModelData.java
                  ModelVersion.java
                  FaceVerificationResult.java
                internal/                 # 3ê°œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
                  VectorComparisonEngine.java
                  ModelLifecycleManager.java
                  FaceModelEventProcessor.java
                interfaceadapter/         # 1ê°œ ì–´ëŒ‘í„°
                  FaceModelServiceApiImpl.java
                system/                   # 1ê°œ êµ¬ì„± ë£¨íŠ¸
                  FaceModelServiceComponent.java
```

### íŒŒì¼ë³„ ë¼ì¸ ìˆ˜ ë° ì±…ì„

| íŒŒì¼ | ë¼ì¸ | ì±…ì„ |
|------|------|------|
| IFaceModelServiceApi.java | 30 | ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸ API í¬íŠ¸ |
| IFaceModelService.java | 28 | ë²¡í„° ìœ ì‚¬ë„ í•µì‹¬ ë¡œì§ í¬íŠ¸ |
| IModelManagementPort.java | 40 | ëª¨ë¸ ë²„ì „ ê´€ë¦¬ í¬íŠ¸ |
| IFaceModelEventHandler.java | 25 | ì´ë²¤íŠ¸ ì²˜ë¦¬ í¬íŠ¸ |
| IFaceModelRepository.java | 35 | ë²¡í„° ì €ì¥ì†Œ í¬íŠ¸ |
| IModelVersionRepository.java | 38 | ëª¨ë¸ ë²„ì „ ì €ì¥ì†Œ í¬íŠ¸ |
| **ê³„ (Ports)** | **196** | |
| FaceModelData.java | 48 | ì €ì¥ëœ ì–¼êµ´ ë²¡í„° ëª¨ë¸ |
| ModelVersion.java | 55 | ëª¨ë¸ ë²„ì „ ë©”íƒ€ë°ì´í„° |
| FaceVerificationResult.java | 38 | ì¸ì¦ ê²°ê³¼ DTO |
| **ê³„ (Models)** | **141** | |
| VectorComparisonEngine.java | 76 | ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚° |
| ModelLifecycleManager.java | 98 | ëª¨ë¸ ë²„ì „ ê´€ë¦¬ & ë¡¤ë°± |
| FaceModelEventProcessor.java | 60 | ë„ë©”ì¸ ì´ë²¤íŠ¸ ë¼ìš°íŒ… |
| **ê³„ (Internal Logic)** | **234** | |
| FaceModelServiceApiImpl.java | 65 | API êµ¬í˜„ ì–´ëŒ‘í„° |
| **ê³„ (Adapter)** | **65** | |
| FaceModelServiceComponent.java | 80 | ì‹±ê¸€í†¤ DI ì»¨í…Œì´ë„ˆ |
| **ê³„ (System)** | **80** | |
| **ì´ ê³„** | **716** | |

---

## ì•„í‚¤í…ì²˜ êµ¬ì¡°

### Hexagonal Architecture (ìœ¡ê°í˜• ì•„í‚¤í…ì²˜)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Interface Adapter Layer                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   FaceModelServiceApiImpl                    â”‚   â”‚
â”‚  â”‚   (REST/gRPC ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                    â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Business Logic Layer (Core)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Vector           â”‚  â”‚ Model                   â”‚ â”‚
â”‚  â”‚ Comparison       â”‚  â”‚ Lifecycle               â”‚ â”‚
â”‚  â”‚ Engine           â”‚  â”‚ Manager                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FaceModelEventProcessor                      â”‚  â”‚
â”‚  â”‚ (ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                    â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Port (Interface) Layer - Contract              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ IFaceModel   â”‚ â”‚ IModel                       â”‚ â”‚
â”‚  â”‚ Service      â”‚ â”‚ Management                   â”‚ â”‚
â”‚  â”‚ Api          â”‚ â”‚ Port                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ IFaceModel   â”‚ â”‚ IFaceModel                   â”‚ â”‚
â”‚  â”‚ Repository   â”‚ â”‚ EventHandler                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ IModelVersionRepository                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                    â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    System Interface Layer (Infrastructure)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ FaceModel        â”‚  â”‚ Event Bus            â”‚    â”‚
â”‚  â”‚ Repository       â”‚  â”‚ (Message Broker)     â”‚    â”‚
â”‚  â”‚ Impl             â”‚  â”‚                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ModelVersionRepositoryImpl                    â”‚  â”‚
â”‚  â”‚ (Database Persistence)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                    â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        External Systems (ì™¸ë¶€ ì˜ì¡´ì„±)             â”‚
â”‚  â”œâ”€ ë°ì´í„°ë² ì´ìŠ¤ (ë²¡í„° ì €ì¥ì†Œ)                    â”‚
â”‚  â”œâ”€ ë©”ì‹œì§€ ë¸Œë¡œì»¤ (ì´ë²¤íŠ¸ êµ¬ë…)                   â”‚
â”‚  â”œâ”€ ì¸ì¦ ì„œë¹„ìŠ¤ (ì‚¬ìš©ì ê²€ì¦)                     â”‚
â”‚  â””â”€ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ (í—¬ìŠ¤ì²´í¬)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬ ê¸°ëŠ¥

#### 1. VectorComparisonEngine
- **ì±…ì„**: ì–¼êµ´ ë²¡í„° ê°„ ìœ ì‚¬ë„ ê³„ì‚° (ì½”ì‚¬ì¸ ìœ ì‚¬ë„)
- **ë©”ì„œë“œ**:
  - `calculateSimilarityScore(vector1, vector2)`: 0.0 ~ 1.0 ë²”ìœ„ ìœ ì‚¬ë„
  - `createVerificationResult()`: ì¸ì¦ ê²°ê³¼ ìƒì„±
  - `isModelLoaded()`: ëª¨ë¸ ìƒíƒœ í™•ì¸

#### 2. ModelLifecycleManager
- **ì±…ì„**: ëª¨ë¸ ë²„ì „ ê´€ë¦¬ ë° ë¼ì´í”„ì‚¬ì´í´
- **ë©”ì„œë“œ**:
  - `loadNewModel()`: ìƒˆ ëª¨ë¸ ë¡œë“œ ë° í™œì„±í™”
  - `rollbackToPreviousModel()`: ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
  - `getActiveModelVersion()`: í˜„ì¬ í™œì„± ëª¨ë¸ ì¡°íšŒ

#### 3. FaceModelEventProcessor
- **ì±…ì„**: ë„ë©”ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë° ë¼ìš°íŒ…
- **ì´ë²¤íŠ¸ íƒ€ì…**:
  - `AccessAttemptEvent`: ì ‘ê·¼ ì‹œë„ ê¸°ë¡
  - `EquipmentFaultDetectedEvent`: ì¹´ë©”ë¼ ì˜¤ë¥˜ ì²˜ë¦¬

#### 4. FaceModelServiceComponent (êµ¬ì„± ë£¨íŠ¸)
- **ì±…ì„**: DI ì»¨í…Œì´ë„ˆ ë° ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬
- **ë©”ì„œë“œ**:
  - `getInstance()`: ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ì¡°íšŒ
  - `getFaceModelServiceApi()`: API í¬íŠ¸ ì¡°íšŒ
  - `getVectorComparisonEngine()`: ì—”ì§„ ì¡°íšŒ
  - `shutdown()`: ë¦¬ì†ŒìŠ¤ ì •ë¦¬

---

## ì½”ë“œ ì˜ˆì‹œ

### ë²¡í„° ìœ ì‚¬ë„ ê³„ì‚° (ì½”ì‚¬ì¸ ìœ ì‚¬ë„)
```java
public Double calculateSimilarityScore(byte[] vector1, byte[] vector2) {
    // 1. ì…ë ¥ ê²€ì¦
    if (vector1 == null || vector2 == null || vector1.length == 0) {
        return 0.0;
    }

    // 2. ë°”ì´íŠ¸ ë°°ì—´ â†’ double ë°°ì—´ ë³€í™˜
    double[] v1 = convertBytesToDoubles(vector1);
    double[] v2 = convertBytesToDoubles(vector2);

    // 3. ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚°
    // similarity = dot(v1, v2) / (||v1|| * ||v2||)
    double dotProduct = 0.0;
    double magnitude1 = 0.0;
    double magnitude2 = 0.0;

    for (int i = 0; i < v1.length; i++) {
        dotProduct += v1[i] * v2[i];
        magnitude1 += v1[i] * v1[i];
        magnitude2 += v2[i] * v2[i];
    }

    return dotProduct / (Math.sqrt(magnitude1) * Math.sqrt(magnitude2));
}
```

### êµ¬ì„± ë£¨íŠ¸ íŒ¨í„´
```java
public class FaceModelServiceComponent {
    private static FaceModelServiceComponent instance;
    private final VectorComparisonEngine vectorComparisonEngine;
    private final ModelLifecycleManager modelLifecycleManager;
    private final FaceModelEventProcessor faceModelEventProcessor;
    private final IFaceModelServiceApi faceModelServiceApi;

    private FaceModelServiceComponent() {
        // ì˜ì¡´ì„± ìƒì„±
        this.vectorComparisonEngine = new VectorComparisonEngine();
        this.modelLifecycleManager = new ModelLifecycleManager();
        this.faceModelEventProcessor = new FaceModelEventProcessor();

        // API êµ¬í˜„ì²´ ìƒì„± (DI)
        this.faceModelServiceApi = new FaceModelServiceApiImpl(
            vectorComparisonEngine,
            modelLifecycleManager
        );

        // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
        this.faceModelEventProcessor.register();
    }

    public static synchronized FaceModelServiceComponent getInstance() {
        if (instance == null) {
            instance = new FaceModelServiceComponent();
        }
        return instance;
    }
}
```

---

## ë‹¤ìŒ ë‹¨ê³„

### Phase 2: Repository êµ¬í˜„ (ì˜ˆì •)
- [ ] FaceModelRepositoryImpl.java (ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™)
- [ ] ModelVersionRepositoryImpl.java (ëª¨ë¸ ë²„ì „ ì €ì¥ì†Œ)
- [ ] DB ìŠ¤í‚¤ë§ˆ ì •ì˜

### Phase 3: í†µí•© & ë¦¬íŒ©í† ë§ (ì˜ˆì •)
- [ ] RealTime_AccessServiceì—ì„œ facemodel ëª¨ë“ˆ ì œê±°
- [ ] ë©”ì‹œì§€ ë¸Œë¡œì»¤ í†µí•© (IMessagePublisherService)
- [ ] REST API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ (Spring Boot)

### Phase 4: í…ŒìŠ¤íŠ¸ & ë°°í¬ (ì˜ˆì •)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (JUnit 5)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] Docker ì´ë¯¸ì§€í™”
- [ ] Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸

---

## ì»´íŒŒì¼ ì—ëŸ¬ ìƒíƒœ

### ì•Œë ¤ì§„ ì´ìŠˆ (ì˜ˆìƒëœ ê²ƒë“¤)

| ì¹´í…Œê³ ë¦¬ | ì—ëŸ¬ | ì›ì¸ | í•´ê²°ì±… |
|---------|------|------|--------|
| Package | `Declared package doesn't match expected` | VS Code ë¦°íŠ¸ ë²„ê·¸ | í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œ í•´ê²° |
| Import | `Cannot resolve import` | íŒŒì¼ ìƒì„± ì§í›„ IDE ì¸ë±ì‹± ì§€ì—° | íŒŒì¼ ì €ì¥ í›„ IDE ìƒˆë¡œê³ ì¹¨ |
| êµ¬í˜„ | ì¶”ìƒ ë©”ì„œë“œ ë¯¸êµ¬í˜„ | Repository êµ¬í˜„ ë¯¸ì™„ë£Œ | Phase 2ì—ì„œ êµ¬í˜„ |

---

## ì½”ë“œ-ë‹¤ì´ì–´ê·¸ë¨ ì¼ì¹˜ì„± ê°œì„ 

| í•­ëª© | ì´ì „ | í˜„ì¬ | ëª©í‘œ |
|------|------|------|------|
| Face Model ì„œë¹„ìŠ¤ êµ¬ì¡° | 70% (í˜¼í•©) | 95% (ì§„í–‰ì¤‘) | 100% (ë…ë¦½) |
| ì „ì²´ ì½”ë“œ-ë‹¤ì´ì–´ê·¸ë¨ ë§¤ì¹­ | 82% | 90% | 100% |

### ì˜ˆìƒ íš¨ê³¼
- âœ… ì•„í‚¤í…ì²˜ ìˆœê²°ì„± í™•ë³´
- âœ… ì¬ì‚¬ìš©ì„± ì¦ëŒ€ (ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì—ì„œë„ í˜¸ì¶œ ê°€ëŠ¥)
- âœ… ë…ë¦½ì  í™•ì¥ì„± (ëª¨ë¸ ì„œë²„ ë³„ë„ ë°°í¬)
- âœ… ì„±ëŠ¥ ìµœì í™” (ì „ë‹´ ì„œë²„ êµ¬ì„± ê°€ëŠ¥)

---

## ì˜ì‚¬ê²°ì • ì°¸ê³ 

**Decision Document**: `FaceModel_êµ¬ì¡°_ì˜ì‚¬ê²°ì •_ê°€ì´ë“œ.md`
- Option A (ì„ íƒë¨): ë…ë¦½ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤
  - ì¥ì : ë†’ì€ ì‘ì§‘ë„, ì¬ì‚¬ìš©ì„±, í™•ì¥ì„±
  - ë‹¨ì : ì´ˆê¸° ê°œë°œ ë¹„ìš© ì¦ê°€
  - ì˜ˆìƒ ê¸°ê°„: 7-12ì¼
  
- Option B (ë¯¸ì„ íƒ): RealTime_AccessService ë‚´ ëª¨ë“ˆ ìœ ì§€
  - ì¥ì : ë¹ ë¥¸ ê°œë°œ
  - ë‹¨ì : ë‚®ì€ ì‘ì§‘ë„, ì¬ì‚¬ìš© ë¶ˆê°€, ë³‘ëª© ê°€ëŠ¥ì„±

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1 ì™„ë£Œ âœ…
- [x] Port interfaces ìƒì„± (6ê°œ)
- [x] Model classes ìƒì„± (3ê°œ)
- [x] Business logic êµ¬í˜„ (3ê°œ)
- [x] Adapter êµ¬í˜„ (1ê°œ)
- [x] Composition root êµ¬í˜„ (1ê°œ)
- [x] í´ë” êµ¬ì¡° ì •ë¦¬

### Phase 2 ëŒ€ê¸°
- [ ] Repository êµ¬í˜„ (2ê°œ)
- [ ] DB ìŠ¤í‚¤ë§ˆ ì •ì˜
- [ ] í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

### Phase 3 ëŒ€ê¸°
- [ ] RealTime_AccessService ë¦¬íŒ©í† ë§
- [ ] ë©”ì‹œì§€ ë¸Œë¡œì»¤ í†µí•©
- [ ] REST API ì¶”ê°€

### Phase 4 ëŒ€ê¸°
- [ ] ì¢…í•© í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ ê²€ì¦
- [ ] ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

---

## ê²°ë¡ 

Face Model Serviceê°€ **ë…ë¦½ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤**ë¡œì„œì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.

âœ… **ì™„ë£Œ**:
- 6ê°œ Port interfaces (ê³„ì•½ ì •ì˜)
- 3ê°œ Model classes (ë„ë©”ì¸ ëª¨ë¸)
- 3ê°œ Business logic components (í•µì‹¬ ë¡œì§)
- 1ê°œ Adapter (ì™¸ë¶€ API)
- 1ê°œ Composition root (DI ê´€ë¦¬)
- **ì´ 9ê°œ íŒŒì¼, 716ì¤„ ì½”ë“œ**

â³ **ë‹¤ìŒ**:
- Repository êµ¬í˜„ (Phase 2)
- RealTime_AccessService ë¦¬íŒ©í† ë§ (Phase 3)
- í†µí•© í…ŒìŠ¤íŠ¸ (Phase 4)

**ì½”ë“œ-ë‹¤ì´ì–´ê·¸ë¨ ì¼ì¹˜ì„±**: 70% â†’ 95% (ì§„í–‰ì¤‘) â†’ 100% (ì™„ë£Œ ì˜ˆì •)

